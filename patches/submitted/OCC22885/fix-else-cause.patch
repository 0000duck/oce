From 1e277af9ab53e883ac0271b6751c1a8354be78aa Mon Sep 17 00:00:00 2001
From: Denis Barbier <bouzim@gmail.com>
Date: Thu, 22 Dec 2011 10:32:17 +0100
Subject: [PATCH] Bugfix: else clause applies to the wrong if statement
 because of missing braces

---
 src/AIS/AIS_InteractiveContext.cxx                 |    4 ++--
 src/AIS2D/AIS2D_InteractiveContext.cxx             |    4 ++--
 src/Bnd/Bnd_Box2d.cxx                              |    8 ++++----
 src/IGESData/IGESData_GlobalSection.cxx            |    4 ++--
 src/ShapeAnalysis/ShapeAnalysis_CheckSmallFace.cxx |    6 ++++--
 src/TPrsStd/TPrsStd_AISPresentation.cxx            |    4 ++--
 6 files changed, 16 insertions(+), 14 deletions(-)

Index: oce/src/AIS/AIS_InteractiveContext.cxx
===================================================================
--- oce.orig/src/AIS/AIS_InteractiveContext.cxx
+++ oce/src/AIS/AIS_InteractiveContext.cxx
@@ -2764,10 +2764,10 @@ void AIS_InteractiveContext::ClearGlobal
       myAISDetectedSeq.Remove( i );
   }
 
-  if(myWasLastMain && !myLastinMain.IsNull())
+  if(myWasLastMain && !myLastinMain.IsNull()) {
     if(myLastinMain == anIObj)
       myLastinMain.Nullify();
-  else 
+  } else
     if(!myWasLastMain && !myLastinColl.IsNull())
       if(myLastinColl == anIObj)
         myLastinColl.Nullify();
Index: oce/src/AIS2D/AIS2D_InteractiveContext.cxx
===================================================================
--- oce.orig/src/AIS2D/AIS2D_InteractiveContext.cxx
+++ oce/src/AIS2D/AIS2D_InteractiveContext.cxx
@@ -350,9 +350,9 @@ void AIS2D_InteractiveContext::EraseMode
 
   if ( !myObjects.IsBound( anIObj ) ) return;
   
-  if ( anIObj->HasDisplayMode() ) 
+  if ( anIObj->HasDisplayMode() ) {
     if ( anIObj->DisplayMode() == aMode ) return;
-  else if ( myDisplayMode == aMode) return;
+  } else if ( myDisplayMode == aMode) return;
   Handle(AIS2D_GlobalStatus) GStatus = myObjects( anIObj );
   if ( GStatus->GraphicStatus() != AIS2D_DS_Displayed ) return;
   if ( GStatus->IsDModeIn( aMode ) ) {}
Index: oce/src/Bnd/Bnd_Box2d.cxx
===================================================================
--- oce.orig/src/Bnd/Bnd_Box2d.cxx
+++ oce/src/Bnd/Bnd_Box2d.cxx
@@ -204,13 +204,13 @@ void Bnd_Box2d::Add (const gp_Dir2d& D)
 {
   Standard_Real DX = D.X();
   Standard_Real DY = D.Y();
-  if (DX < 0)
+  if (DX < 0) {
     if (DX < - gp::Resolution()) OpenXmin();
-  else
+  } else
     if (DX >   gp::Resolution()) OpenXmax();
-  if (DY < 0)
+  if (DY < 0) {
     if (DY < - gp::Resolution()) OpenYmin();
-  else
+  } else
     if (DY >   gp::Resolution()) OpenYmax();
 }
 
Index: oce/src/IGESData/IGESData_GlobalSection.cxx
===================================================================
--- oce.orig/src/IGESData/IGESData_GlobalSection.cxx
+++ oce/src/IGESData/IGESData_GlobalSection.cxx
@@ -126,7 +126,7 @@ void IGESData_GlobalSection::Init(const
 
   // Sending of message : Incorrect number of parameters (following the IGES version)
   // Version less than 5.3 
-  if  (theIGESVersion < 11) 
+  if  (theIGESVersion < 11) {
     if ((nbp < 24) || (nbp > 25)) {
        // 24 or 25 parameters are expected (parameter 25 is not required)
       Message_Msg Msg39 ("XSTEP_39");
@@ -135,7 +135,7 @@ void IGESData_GlobalSection::Init(const
       if (nbp < 24) ach->SendFail(Msg39);
       else          ach->SendWarning(Msg39);
     }
-
+  }
   // Version 5.3 
   else if ((nbp < 25) || (nbp > 26)) {
     // 25 or 26 parameters are expected (parameter 25 is not required)
Index: oce/src/ShapeAnalysis/ShapeAnalysis_CheckSmallFace.cxx
===================================================================
--- oce.orig/src/ShapeAnalysis/ShapeAnalysis_CheckSmallFace.cxx
+++ oce/src/ShapeAnalysis/ShapeAnalysis_CheckSmallFace.cxx
@@ -582,8 +582,10 @@ static Standard_Boolean CheckPoles(const
   Standard_Integer i0 = (uorv == 1 ? poles.LowerCol() : poles.LowerRow());
   Standard_Integer i1 = (uorv == 1 ? poles.UpperCol() : poles.UpperRow());
   for (Standard_Integer i = i0; i <= i1-1; i ++) {
-    if (uorv == 1) if(poles(rank,i).IsEqual(poles(rank, i+1), 1e-15)) return Standard_True;
-    else      if(poles(i,rank).IsEqual(poles(i+1,rank), 1e-15)) return Standard_True;
+    if (uorv == 1) {
+      if(poles(rank,i).IsEqual(poles(rank, i+1), 1e-15)) return Standard_True;
+    } else
+      if(poles(i,rank).IsEqual(poles(i+1,rank), 1e-15)) return Standard_True;
   }  
   return Standard_False;
 }
Index: oce/src/TPrsStd/TPrsStd_AISPresentation.cxx
===================================================================
--- oce.orig/src/TPrsStd/TPrsStd_AISPresentation.cxx
+++ oce/src/TPrsStd/TPrsStd_AISPresentation.cxx
@@ -1031,12 +1031,12 @@ void TPrsStd_AISPresentation::AISErase (
       }
     }
     else {
-     if( remove )
+     if( remove ) {
       if( !ownctx.IsNull() ) {
 	ownctx->Remove (myAIS,Standard_False);
 	myAIS->SetToUpdate();
       }
-     else 
+     } else
       if( !ownctx.IsNull() ) ownctx->Erase (myAIS,Standard_False); 
     }
   }
