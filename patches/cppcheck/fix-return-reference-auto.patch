From 634686e47aa5af5b3152b10e460e3485337a0ca3 Mon Sep 17 00:00:00 2001
From: tpaviot <tpaviot@gmail.com>
Date: Wed, 15 Feb 2012 12:52:24 +0100
Subject: [PATCH] Fix cppcheck-1.53 report error 'Returning reference to auto
 variable'

---
 inc/HatchGen_Hatcher.lxx                           |    3 +-
 src/BOP/BOP_FaceBuilder.cxx                        |    3 +-
 src/BRepFilletAPI/BRepFilletAPI_MakeChamfer.cxx    |    3 +-
 src/BRepFilletAPI/BRepFilletAPI_MakeFillet.cxx     |    3 +-
 src/TopOpeBRep/TopOpeBRep_LineInter.cxx            |    6 +--
 src/TopOpeBRepBuild/TopOpeBRepBuild_Builder.cxx    |    6 +--
 .../TopOpeBRepBuild_EdgeBuilder.cxx                |    3 +-
 .../TopOpeBRepBuild_FaceBuilder.cxx                |    3 +-
 .../TopOpeBRepBuild_SolidBuilder.cxx               |    3 +-
 src/TopOpeBRepDS/TopOpeBRepDS_DataStructure.cxx    |   30 ++++++-------------
 src/TopOpeBRepDS/TopOpeBRepDS_connex.cxx           |    6 +--
 src/TopOpeBRepTool/TopOpeBRepTool_box.cxx          |    3 +-
 12 files changed, 24 insertions(+), 48 deletions(-)

Index: oce/src/BRepFilletAPI/BRepFilletAPI_MakeChamfer.cxx
===================================================================
--- oce.orig/src/BRepFilletAPI/BRepFilletAPI_MakeChamfer.cxx
+++ oce/src/BRepFilletAPI/BRepFilletAPI_MakeChamfer.cxx
@@ -272,8 +272,7 @@ const TopoDS_Edge& BRepFilletAPI_MakeCha
 					     const Standard_Integer J)const
 {
   const Handle(ChFiDS_Spine)& Spine = myBuilder.Value(I);
-  const TopoDS_Edge& E = Spine->Edges(J);
-  return E;
+  return Spine->Edges(J);
 }
 
 //=======================================================================
Index: oce/src/BRepFilletAPI/BRepFilletAPI_MakeFillet.cxx
===================================================================
--- oce.orig/src/BRepFilletAPI/BRepFilletAPI_MakeFillet.cxx
+++ oce/src/BRepFilletAPI/BRepFilletAPI_MakeFillet.cxx
@@ -407,8 +407,7 @@ const TopoDS_Edge& BRepFilletAPI_MakeFil
 						  const Standard_Integer J)const
 {
   const Handle(ChFiDS_Spine)& Spine = myBuilder.Value(I);
-  const TopoDS_Edge& S = Spine->Edges(J);
-  return S;
+  return Spine->Edges(J);
 }
 
 
Index: oce/src/Geom2dHatch/Geom2dHatch_Hatcher.lxx
===================================================================
--- oce.orig/src/Geom2dHatch/Geom2dHatch_Hatcher.lxx
+++ oce/src/Geom2dHatch/Geom2dHatch_Hatcher.lxx
@@ -183,8 +183,7 @@ inline const HatchGen_PointOnHatching& H
 #if RAISE_IF_NOSUCHOBJECT
   Standard_OutOfRange_Raise_if (IndP < 0 || IndP > Hatching.NbPoints(), "") ;
 #endif
-  const HatchGen_PointOnHatching& PntH = Hatching.Point (IndP) ;
-  return PntH ;
+  return Hatching.Point(IndP);
 }
 
 //=======================================================================
Index: oce/src/TopOpeBRep/TopOpeBRep_LineInter.cxx
===================================================================
--- oce.orig/src/TopOpeBRep/TopOpeBRep_LineInter.cxx
+++ oce/src/TopOpeBRep/TopOpeBRep_LineInter.cxx
@@ -490,14 +490,12 @@ const TopoDS_Shape& TopOpeBRep_LineInter
     if(myILR->IsArcOnS1()) { 
       const Handle(Adaptor2d_HCurve2d)& AHC2D = myILR->ArcOnS1();
       const BRepAdaptor_Curve2d& BC2DP = *((BRepAdaptor_Curve2d*)&(AHC2D->Curve2d()));
-      const TopoDS_Shape& S = BC2DP.Edge();
-      return S;
+      return BC2DP.Edge();
     }
     else { 
       const Handle(Adaptor2d_HCurve2d)& AHC2D = myILR->ArcOnS2();
       const BRepAdaptor_Curve2d& BC2DP = *((BRepAdaptor_Curve2d*)&(AHC2D->Curve2d()));
-      const TopoDS_Shape& S = BC2DP.Edge();
-      return S;
+      return BC2DP.Edge();
     }
   }
   else
Index: oce/src/TopOpeBRepBuild/TopOpeBRepBuild_Builder.cxx
===================================================================
--- oce.orig/src/TopOpeBRepBuild/TopOpeBRepBuild_Builder.cxx
+++ oce/src/TopOpeBRepBuild/TopOpeBRepBuild_Builder.cxx
@@ -370,8 +370,7 @@ const TopTools_ListOfShape& TopOpeBRepBu
 
   if ((*p).IsBound(S)) {
     const TopOpeBRepDS_ListOfShapeOn1State& losos = (*p).Find(S);
-    const TopTools_ListOfShape& L = losos.ListOnState();
-    return L;
+    return losos.ListOnState();
   }
   return myEmptyShapeList;
 } // Splits
@@ -399,8 +398,7 @@ TopTools_ListOfShape& TopOpeBRepBuild_Bu
   TopOpeBRepDS_ListOfShapeOn1State thelist1;
   if (!(*p).IsBound(S)) (*p).Bind(S, thelist1);
   TopOpeBRepDS_ListOfShapeOn1State& losos = (*p).ChangeFind(S);
-  TopTools_ListOfShape& L = losos.ChangeListOnState();
-  return L;
+  return losos.ChangeListOnState();
 } // ChangeSplit
 
 //=======================================================================
Index: oce/src/TopOpeBRepBuild/TopOpeBRepBuild_EdgeBuilder.cxx
===================================================================
--- oce.orig/src/TopOpeBRepBuild/TopOpeBRepBuild_EdgeBuilder.cxx
+++ oce/src/TopOpeBRepBuild/TopOpeBRepBuild_EdgeBuilder.cxx
@@ -121,8 +121,7 @@ const TopoDS_Shape& TopOpeBRepBuild_Edge
 {
   const Handle(TopOpeBRepBuild_Loop)& L = Loop();
   const Handle(TopOpeBRepBuild_Pave)& PV = *((Handle(TopOpeBRepBuild_Pave)*)&L);
-  const TopoDS_Shape& V = PV->Vertex();
-  return V;
+  return PV->Vertex();
 }
 
 //=======================================================================
Index: oce/src/TopOpeBRepBuild/TopOpeBRepBuild_FaceBuilder.cxx
===================================================================
--- oce.orig/src/TopOpeBRepBuild/TopOpeBRepBuild_FaceBuilder.cxx
+++ oce/src/TopOpeBRepBuild/TopOpeBRepBuild_FaceBuilder.cxx
@@ -536,8 +536,7 @@ Standard_Boolean TopOpeBRepBuild_FaceBui
 const TopoDS_Shape& TopOpeBRepBuild_FaceBuilder::OldWire() const
 {
   const Handle(TopOpeBRepBuild_Loop)& L = myFaceAreaBuilder.Loop();
-  const TopoDS_Shape& B = L->Shape();
-  return B;
+  return L->Shape();
 }
 
 //=======================================================================
Index: oce/src/TopOpeBRepBuild/TopOpeBRepBuild_SolidBuilder.cxx
===================================================================
--- oce.orig/src/TopOpeBRepBuild/TopOpeBRepBuild_SolidBuilder.cxx
+++ oce/src/TopOpeBRepBuild/TopOpeBRepBuild_SolidBuilder.cxx
@@ -140,8 +140,7 @@ Standard_Boolean TopOpeBRepBuild_SolidBu
 const TopoDS_Shape& TopOpeBRepBuild_SolidBuilder::OldShell() const
 {
   const Handle(TopOpeBRepBuild_Loop)& L = mySolidAreaBuilder.Loop();
-  const TopoDS_Shape& B = L->Shape();
-  return B;
+  return L->Shape();
 }
 
 //=======================================================================
Index: oce/src/TopOpeBRepDS/TopOpeBRepDS_DataStructure.cxx
===================================================================
--- oce.orig/src/TopOpeBRepDS/TopOpeBRepDS_DataStructure.cxx
+++ oce/src/TopOpeBRepDS/TopOpeBRepDS_DataStructure.cxx
@@ -442,8 +442,7 @@ const TopOpeBRepDS_ListOfInterference& T
     return myEmptyListOfInterference;
   }
   const TopOpeBRepDS_SurfaceData& SD = mySurfaces.Find(I);
-  const TopOpeBRepDS_ListOfInterference& LI = SD.Interferences();
-  return LI;
+  return SD.Interferences();
 }
 
 
@@ -458,8 +457,7 @@ TopOpeBRepDS_ListOfInterference& TopOpeB
     return myEmptyListOfInterference;
   }
   TopOpeBRepDS_SurfaceData& SD = mySurfaces.ChangeFind(I);
-  TopOpeBRepDS_ListOfInterference& LI = SD.ChangeInterferences();
-  return LI;
+  return SD.ChangeInterferences();
 }
 
 //=======================================================================
@@ -473,8 +471,7 @@ const TopOpeBRepDS_ListOfInterference& T
     return myEmptyListOfInterference;
   }
   const TopOpeBRepDS_CurveData& CD = myCurves.Find(I);
-  const TopOpeBRepDS_ListOfInterference& LI = CD.Interferences();
-  return LI;
+  return CD.Interferences();
 }
 
 
@@ -489,8 +486,7 @@ TopOpeBRepDS_ListOfInterference& TopOpeB
     return myEmptyListOfInterference;
   }
   TopOpeBRepDS_CurveData& CD = myCurves.ChangeFind(I);
-  TopOpeBRepDS_ListOfInterference& LI = CD.ChangeInterferences();
-  return LI;
+  return CD.ChangeInterferences();
 }
 
 
@@ -505,8 +501,7 @@ const TopOpeBRepDS_ListOfInterference& T
     return myEmptyListOfInterference;
   }
   const TopOpeBRepDS_PointData& PD = myPoints.Find(I);
-  const TopOpeBRepDS_ListOfInterference& LI = PD.Interferences();
-  return LI;
+  return PD.Interferences();
 }
 
 
@@ -521,8 +516,7 @@ TopOpeBRepDS_ListOfInterference& TopOpeB
     return myEmptyListOfInterference;
   }
   TopOpeBRepDS_PointData& PD = myPoints.ChangeFind(I);
-  TopOpeBRepDS_ListOfInterference& LI = PD.ChangeInterferences();
-  return LI;
+  return PD.ChangeInterferences();
 }
 
 
@@ -582,8 +576,7 @@ const TopTools_ListOfShape& TopOpeBRepDS
   if(!S.IsNull())
     if (myShapes.Contains(S)) {
       const TopOpeBRepDS_ShapeData& SD = myShapes.FindFromKey(S);
-      const TopTools_ListOfShape& l = SD.mySameDomain;
-      return l;
+      return SD.mySameDomain;
     }
   return myEmptyListOfShape;
 }
@@ -608,8 +601,7 @@ const TopTools_ListOfShape& TopOpeBRepDS
 {
   if (I >= 1 && I <= myShapes.Extent()) {
     const TopOpeBRepDS_ShapeData& SD = myShapes.FindFromIndex(I);
-    const TopTools_ListOfShape& l = SD.mySameDomain;
-    return l;
+    return SD.mySameDomain;
   }
   else {
     return myEmptyListOfShape;
@@ -1152,8 +1144,7 @@ const TopOpeBRepDS_Curve& TopOpeBRepDS_D
 {
   if ( myCurves.IsBound(I) ) {
     const TopOpeBRepDS_CurveData& CD = myCurves(I);
-    const TopOpeBRepDS_Curve& C = CD.myCurve;
-    return C;
+    return CD.myCurve;
   }
   else
     return myEmptyCurve;
@@ -1167,8 +1158,7 @@ TopOpeBRepDS_Curve& TopOpeBRepDS_DataStr
 {
   if ( myCurves.IsBound(I) ) {
     TopOpeBRepDS_CurveData& CD = myCurves.ChangeFind(I);
-    TopOpeBRepDS_Curve& C = CD.myCurve;
-    return C;
+    return CD.myCurve;
   }
   return myEmptyCurve;
 }
Index: oce/src/TopOpeBRepDS/TopOpeBRepDS_connex.cxx
===================================================================
--- oce.orig/src/TopOpeBRepDS/TopOpeBRepDS_connex.cxx
+++ oce/src/TopOpeBRepDS/TopOpeBRepDS_connex.cxx
@@ -67,8 +67,7 @@ Standard_EXPORT const TopTools_ListOfSha
   Standard_Integer re = BDS.AncestorRank(E); if (re == 0) return *GLOBAL_los;
   TopTools_DataMapOfShapeListOfShape* pelf = (SI == 1) ? GLOBAL_elf1 : GLOBAL_elf2;
   TopTools_DataMapOfShapeListOfShape& elf = *pelf;
-  const TopTools_ListOfShape& lof = elf.Find(E);
-  return lof;
+  return elf.Find(E);
 }
 
 // S = edge --> liste de faces connexes par S
@@ -84,8 +83,7 @@ Standard_EXPORT const TopTools_ListOfSha
   else if (t == TopAbs_FACE) {
     TopTools_DataMapOfShapeListOfShape& fle = *GLOBAL_fle;
     if (fle.IsBound(S)) {
-      const TopTools_ListOfShape& le = fle.Find(S);
-      return le;
+      return fle.Find(S);
     }
   }
   return *GLOBAL_los;
Index: oce/src/TopOpeBRepTool/TopOpeBRepTool_box.cxx
===================================================================
--- oce.orig/src/TopOpeBRepTool/TopOpeBRepTool_box.cxx
+++ oce/src/TopOpeBRepTool/TopOpeBRepTool_box.cxx
@@ -42,7 +42,6 @@ Standard_EXPORT Handle(TopOpeBRepTool_HB
 Standard_EXPORT const Bnd_Box& FBOX_Box(const TopoDS_Shape& S)
 {
   Handle(TopOpeBRepTool_HBoxTool) hbt = FBOX_GetHBoxTool();
-  const Bnd_Box& b = hbt->Box(S);
 #ifdef OCCT_DEBUG
   if (TopOpeBRepTool_GettraceBOX()) {
     Standard_Integer i = hbt->Index(S);
@@ -50,5 +49,5 @@ Standard_EXPORT const Bnd_Box& FBOX_Box(
     cout<<"TOOLBOX : "<<i<<"/"<<n<<endl;
   }
 #endif
-  return b;
+  return hbt->Box(S);
 }
