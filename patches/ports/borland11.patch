From d1210dbb39e725f82f298a0f3442bcc61b63f09f Mon Sep 17 00:00:00 2001
From: Fotios Sioutis <sfotis@gmail.com>
Date: Tue, 22 Mar 2011 07:18:25 +0100
Subject: [PATCH 8/9] Move code to work around a BCC bug

For an unknown reason, BCC reports this error:
  [C++ Error] Standard_ErrorHandler.cpp(48): E2092 Storage class 'static' is not allowed here
which disappears when GetThreadID() is defined before static members.
---
 ros/src/Standard/Standard_ErrorHandler.cxx |   17 +++++++++--------
 1 files changed, 9 insertions(+), 8 deletions(-)

From 63bfacb18355d6e03bc3098c50f25486e533acb1 Mon Sep 17 00:00:00 2001
From: Fotios Sioutis <sfotis@gmail.com>
Date: Fri, 18 Nov 2011 12:03:23 +0200
Subject: [PATCH] Fixed convertion from int to Handle under bcc32

---
 inc/AIS_InteractiveContext.lxx |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

From 29c06652969463d012eb97990f07a8bf6feeae77 Mon Sep 17 00:00:00 2001
From: Fotios Sioutis <sfotis@gmail.com>
Date: Fri, 11 Nov 2011 23:34:40 +0200
Subject: [PATCH] Resolves a possible bcc32 compiler bug.

For a strange reason this file must not have
exception handling compiler option enabled,
otherwise an internal compiler error occurs.
---
 src/ShapeFix/ShapeFix_ComposeShell.cxx |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

From 9e516481dcbaf52fcf92071e2344ab1ef28caee3 Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Sun, 15 Jan 2012 14:06:32 +0100
Subject: [PATCH 01/12] Fixes ambiguity errors on bcc32 compiler for
 'BRepLib_MakeEdge'. ('BRepLib_MakeEdge::operator
 TopoDS_Edge()' and 'BRepLib_MakeShape::operator
 TopoDS_Shape')

---
 src/BRepFill/BRepFill.cxx                 |    8 ++++----
 src/BRepFill/BRepFill_CompatibleWires.cxx |   10 +++++-----
 src/BRepFill/BRepFill_Evolved.cxx         |    8 ++++----
 src/BRepFill/BRepFill_Filling.cxx         |    4 ++--
 src/BRepFill/BRepFill_NSections.cxx       |    2 +-
 src/BRepFill/BRepFill_OffsetWire.cxx      |   12 ++++++------
 src/BRepOffset/BRepOffset_Tool.cxx        |    4 ++--
 src/BRepTest/BRepTest_ExtremaCommands.cxx |    6 +++---
 src/ChFi2d/ChFi2d_Builder.cxx             |    2 +-
 src/ShapeFix/ShapeFix_Wire.cxx            |    2 +-
 10 files changed, 29 insertions(+), 29 deletions(-)

From 7f274a38c539dbfee59250287efcc2de556d8264 Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Sun, 15 Jan 2012 14:08:55 +0100
Subject: [PATCH 02/12] Fixes ambiguity errors on bcc32 compiler for
 'BRepLib_MakeVertex'. ('BRepLib_MakeVertex::operator
 TopoDS_Vertex()' and 'BRepLib_MakeShape::operator
 TopoDS_Shape')

---
 src/BRepFill/BRepFill_Evolved.cxx       |    4 ++--
 src/BRepOffset/BRepOffset_Inter2d.cxx   |    8 ++++----
 src/BRepOffset/BRepOffset_Inter3d.cxx   |    4 ++--
 src/BRepOffset/BRepOffset_Tool.cxx      |    2 +-
 src/BRepTest/BRepTest_CurveCommands.cxx |    2 +-
 src/LocOpe/LocOpe_DPrism.cxx            |   16 ++++++++--------
 6 files changed, 18 insertions(+), 18 deletions(-)

From 4376000edfe1304231e8f2cb1fa3421486cd89c8 Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Sun, 15 Jan 2012 14:17:20 +0100
Subject: [PATCH 03/12] Fixes ambiguity errors on bcc32 compiler for
 'BRepLib_MakeFace'. ('BRepLib_MakeFace::operator
 TopoDS_Face()' and 'BRepLib_MakeShape::operator
 TopoDS_Shape')

---
 src/BRepFill/BRepFill_Evolved.cxx        |    4 ++--
 src/BRepOffset/BRepOffset_MakeOffset.cxx |    4 ++--
 src/BRepOffset/BRepOffset_Tool.cxx       |    2 +-
 src/ChFi3d/ChFi3d_Builder_2.cxx          |    2 +-
 4 files changed, 6 insertions(+), 6 deletions(-)

From 36d4e3f1ea97730aed17680461325e1c4e041eab Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Sun, 15 Jan 2012 14:20:07 +0100
Subject: [PATCH 04/12] Fixes ambiguity errors on bcc32 compiler for
 'BRepLib_MakeWire'. ('BRepLib_MakeWire::operator
 TopoDS_Wire()' and 'BRepLib_MakeShape::operator
 TopoDS_Shape')

---
 src/BRepFill/BRepFill_Evolved.cxx         |    4 ++--
 src/BRepFill/BRepFill_Sweep.cxx           |    2 +-
 src/BRepFill/BRepFill_TrimShellCorner.cxx |    4 ++--
 src/BRepOffset/BRepOffset_Tool.cxx        |    4 ++--
 4 files changed, 7 insertions(+), 7 deletions(-)

From 7d7ced99f42f124496b4984c37e08451cddbbce1 Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Sun, 15 Jan 2012 14:21:33 +0100
Subject: [PATCH 05/12] Fixes ambiguity errors on bcc32 compiler for
 'BRepBuilderAPI_MakeVertex'.
 ('BRepBuilderAPI_MakeVertex::operator
 TopoDS_Vertex()' and
 'BRepBuilderAPI_MakeShape::operator TopoDS_Shape')

---
 src/AIS/AIS_Point.cxx                         |    2 +-
 src/BRepExtrema/BRepExtrema_DistanceSS.cxx    |    6 +++---
 src/BRepPrimAPI/BRepPrimAPI_MakeHalfSpace.cxx |    2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

From 26e659304bd535645f86c12a8fd50271ccd374ea Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Sun, 15 Jan 2012 14:22:41 +0100
Subject: [PATCH 06/12] Fixes ambiguity errors on bcc32 compiler for
 'BRepBuilderAPI_MakeFace'.
 ('BRepBuilderAPI_MakeFace::operator TopoDS_Face()'
 and 'BRepBuilderAPI_MakeShape::operator
 TopoDS_Shape')

---
 src/BRepMAT2d/BRepMAT2d_Explorer.cxx      |    2 +-
 src/BRepTest/BRepTest_SurfaceCommands.cxx |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

From fb8cafeef9f0efce80b719bc4feab4b4207434e9 Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Sun, 15 Jan 2012 14:23:52 +0100
Subject: [PATCH 07/12] Fixes ambiguity errors on bcc32 compiler for
 'BRepBuilderAPI_MakeEdge'.
 ('BRepBuilderAPI_MakeEdge::operator TopoDS_Edge()'
 and 'BRepBuilderAPI_MakeShape::operator
 TopoDS_Shape')

---
 src/BRepTest/BRepTest_CurveCommands.cxx |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

From 86fca752b0add3972d8fd388dedc1c849d100113 Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Sun, 15 Jan 2012 14:29:13 +0100
Subject: [PATCH 08/12] Fixes ambiguity errors on bcc32 compiler for
 'BRepPrimAPI_MakeBox'.
 ('BRepPrimAPI_MakeBox::operator TopoDS_Shell()' and
 'BRepPrimAPI_MakeShape::operator TopoDS_Shape')
 ('BRepPrimAPI_MakeBox::operator TopoDS_Solid()' and
 'BRepPrimAPI_MakeShape::operator TopoDS_Shape'

---
 src/VrmlData/VrmlData_Geometry.cxx                 |    2 +-
 test/BRepAlgoAPI_test/boolean_ops.cpp              |    4 ++--
 .../Standard_StdAllocator_test.cpp                 |    2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

From abcf0096ca722486a3ced6270e39cf81c70810cf Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Mon, 16 Jan 2012 13:42:55 +0100
Subject: [PATCH 09/12] Resolves a possible bcc32 compiler bug.

For some reason the bcc32 compiler (v6.20 and up) fails to build these
files and generates an internal compiler error. When language exceptions
are disabled, this issue is solved.
---
 src/OpenGl/OpenGl_attri.cxx      |    5 +++++
 src/OpenGl/OpenGl_depthcue.cxx   |    5 +++++
 src/OpenGl/OpenGl_pick.cxx       |    5 +++++
 src/OpenGl/OpenGl_telem_util.cxx |    5 +++++
 src/OpenGl/OpenGl_undefined.cxx  |    5 +++++
 src/OpenGl/OpenGl_view.cxx       |    4 ++++
 6 files changed, 29 insertions(+), 0 deletions(-)

From 911d3be1164f4cdc34c406f8a75868963ae8ff04 Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Mon, 16 Jan 2012 18:34:07 +0100
Subject: [PATCH 10/12] Fixed bcc32 compiler option -x- for version 6.40.

From version 6.40 of bcc32 it is no longer allowed to add -x- (Disable exceptions)
options with a pragma directive. So now this option is set as a compiler
option through cmake.
---
 adm/cmake/BuildToolkit.cmake           |   18 ++++++++++++++++++
 src/OpenGl/OpenGl_attri.cxx            |    7 ++++---
 src/OpenGl/OpenGl_depthcue.cxx         |    5 +++--
 src/OpenGl/OpenGl_pick.cxx             |    7 ++++---
 src/OpenGl/OpenGl_telem_util.cxx       |    7 ++++---
 src/OpenGl/OpenGl_undefined.cxx        |    7 ++++---
 src/OpenGl/OpenGl_view.cxx             |    7 ++++---
 src/ShapeFix/ShapeFix_ComposeShell.cxx |    3 ++-
 8 files changed, 43 insertions(+), 18 deletions(-)

From a9d890c7d3e6c5b2876adfa65c281b7777fe572b Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Mon, 16 Jan 2012 22:32:53 +0100
Subject: [PATCH 11/12] Added additional borland support for cmake build
 system.

---
 CMakeLists.txt               |   80 +++++++++++++++++++++++++++++++++++++++---
 adm/cmake/BuildToolkit.cmake |   21 +++++++++++
 2 files changed, 96 insertions(+), 5 deletions(-)

From 9c413090539903003944a095bcd13b99c0e448c2 Mon Sep 17 00:00:00 2001
From: davyw <davy.wouters@gmail.com>
Date: Tue, 17 Jan 2012 22:36:41 +0100
Subject: [PATCH 12/12] Moved bcc32 specific scripts for TKService and
 TKOpenGl to their own CMakeLists.txt.

---
 adm/cmake/BuildToolkit.cmake       |   31 -------------------------------
 adm/cmake/TKOpenGl/CMakeLists.txt  |   15 +++++++++++++++
 adm/cmake/TKService/CMakeLists.txt |   10 ++++++++++
 3 files changed, 25 insertions(+), 31 deletions(-)

Index: oce/src/AIS/AIS_InteractiveContext.lxx
===================================================================
--- oce.orig/src/AIS/AIS_InteractiveContext.lxx
+++ oce/src/AIS/AIS_InteractiveContext.lxx
@@ -77,7 +77,7 @@ inline Standard_Boolean AIS_InteractiveC
 {return myCurLocalIndex != 0;}
 
 inline Handle_AIS_LocalContext AIS_InteractiveContext::LocalContext() const
-{ return (myCurLocalIndex > 0) ? myLocalContexts(myCurLocalIndex) : NULL; }
+{ return (myCurLocalIndex > 0) ? myLocalContexts(myCurLocalIndex) : (Handle_AIS_LocalContext) NULL; }
 
 inline const TCollection_AsciiString& AIS_InteractiveContext::CurrentName() const 
 {return myCurrentName;} 
Index: oce/src/AIS/AIS_Point.cxx
===================================================================
--- oce.orig/src/AIS/AIS_Point.cxx
+++ oce/src/AIS/AIS_Point.cxx
@@ -161,7 +161,7 @@ void AIS_Point::UnsetColor()
 TopoDS_Vertex AIS_Point::Vertex() const
 {
   gp_Pnt P = myComponent->Pnt();
-  return BRepBuilderAPI_MakeVertex(P);
+  return (TopoDS_Vertex) BRepBuilderAPI_MakeVertex(P);
 }
 
 
Index: oce/src/BRepExtrema/BRepExtrema_DistanceSS.cxx
===================================================================
--- oce.orig/src/BRepExtrema/BRepExtrema_DistanceSS.cxx
+++ oce/src/BRepExtrema/BRepExtrema_DistanceSS.cxx
@@ -447,7 +447,7 @@ static void PERFORM_C0(const TopoDS_Edge
       {
         const Standard_Real aParameter = arrInter(i);
         const gp_Pnt aPnt = aAdaptorCurve.Value(aParameter);
-        const TopoDS_Vertex V1 = BRepBuilderAPI_MakeVertex(aPnt);
+        const TopoDS_Vertex V1 = (const TopoDS_Vertex) BRepBuilderAPI_MakeVertex(aPnt);
 
         BRepExtrema_ExtPC Ext(V1,Eother);
         const Standard_Integer NbExtrema = Ext.IsDone()? Ext.NbExt() : 0;
@@ -1051,7 +1051,7 @@ void BRepExtrema_DistanceSS::Perform(con
       {
         const Standard_Real aParameter = arrInter(i);
         gp_Pnt aPnt = aAdaptorCurve.Value(aParameter);
-        TopoDS_Vertex V1 = BRepBuilderAPI_MakeVertex(aPnt);
+        TopoDS_Vertex V1 = (TopoDS_Vertex) BRepBuilderAPI_MakeVertex(aPnt);
 
         BRepExtrema_ExtPF ExtPF(V1,S2);
         const Standard_Integer NbExtrema = ExtPF.IsDone()? ExtPF.NbExt() : 0;
@@ -1196,7 +1196,7 @@ void BRepExtrema_DistanceSS::Perform(con
       {
         const Standard_Real aParameter = arrInter(i);
         gp_Pnt aPnt = aAdaptorCurve.Value(aParameter);
-        TopoDS_Vertex V1 = BRepBuilderAPI_MakeVertex(aPnt);
+        TopoDS_Vertex V1 = (TopoDS_Vertex) BRepBuilderAPI_MakeVertex(aPnt);
 
         BRepExtrema_ExtPF ExtPF(V1,S1);
         const Standard_Integer NbExtrema = ExtPF.IsDone()? ExtPF.NbExt() : 0;
Index: oce/src/BRepFill/BRepFill_CompatibleWires.cxx
===================================================================
--- oce.orig/src/BRepFill/BRepFill_CompatibleWires.cxx
+++ oce/src/BRepFill/BRepFill_CompatibleWires.cxx
@@ -303,14 +303,14 @@ static void TrimEdge (const TopoDS_Edge&
     for (j=1; j<=ndec; j++) {
       // piece of edge  
       m1 = (CutValues.Value(j)-t0)*(last-first)/(t1-t0)+first;
-      TopoDS_Edge CutE = BRepLib_MakeEdge(C,V0,Vbid,m0,m1);
+      TopoDS_Edge CutE = (TopoDS_Edge) BRepLib_MakeEdge(C,V0,Vbid,m0,m1);
       CutE.Orientation(CurrentOrient);
       S.Append(CutE);
       m0 = m1;
       V0 = TopExp::LastVertex(CutE);
       if (j==ndec) {
 	// last piece
-	TopoDS_Edge LastE = BRepLib_MakeEdge(C,V0,Vl,m0,last);
+	TopoDS_Edge LastE = (TopoDS_Edge) BRepLib_MakeEdge(C,V0,Vl,m0,last);
 	LastE.Orientation(CurrentOrient);
 	S.Append(LastE);
       }
@@ -323,14 +323,14 @@ static void TrimEdge (const TopoDS_Edge&
     for (j=ndec; j>=1; j--) {
       // piece of edge  
       m0 = (CutValues.Value(j)-t0)*(last-first)/(t1-t0)+first;
-      TopoDS_Edge CutE = BRepLib_MakeEdge(C,Vbid,V1,m0,m1);
+      TopoDS_Edge CutE = (TopoDS_Edge) BRepLib_MakeEdge(C,Vbid,V1,m0,m1);
       CutE.Orientation(CurrentOrient);
       S.Append(CutE);
       m1 = m0;
       V1 = TopExp::FirstVertex(CutE);
       if (j==1) {
 	// last piece
-	TopoDS_Edge LastE = BRepLib_MakeEdge(C,Vf,V1,first,m1);
+	TopoDS_Edge LastE = (TopoDS_Edge) BRepLib_MakeEdge(C,Vf,V1,first,m1);
 	LastE.Orientation(CurrentOrient);
 	S.Append(LastE);
       }
@@ -427,7 +427,7 @@ static Standard_Boolean EdgeIntersectOnW
   Standard_Real diag = BP1.Distance(BP2);
   Standard_Real dernierparam = diag;
   BRepLib_MakeEdge ME(droite,0.,dernierparam);
-  TopoDS_Edge ECur = BRepLib_MakeEdge(droite,0.,P1.Distance(P2));
+  TopoDS_Edge ECur = (TopoDS_Edge) BRepLib_MakeEdge(droite,0.,P1.Distance(P2));
 
   // calculate the intersection by BRepExtrema (point of min distance)
   BRepExtrema_DistShapeShape DSS(ME.Edge(),W);
Index: oce/src/BRepFill/BRepFill_Evolved.cxx
===================================================================
--- oce.orig/src/BRepFill/BRepFill_Evolved.cxx
+++ oce/src/BRepFill/BRepFill_Evolved.cxx
@@ -364,7 +364,7 @@ void BRepFill_Evolved::Perform(const Top
 			       const Standard_Boolean  Solid)
 {
   mySpineType = Standard_False;
-  TopoDS_Face aFace = BRepLib_MakeFace(Spine,Standard_True);
+  TopoDS_Face aFace = (TopoDS_Face) BRepLib_MakeFace(Spine,Standard_True);
   PrivatePerform( aFace, Profile, AxeProf, Join, Solid);
 }
 
@@ -2047,7 +2047,7 @@ void BRepFill_Evolved::AddTopAndBottom(B
     BRepAlgo_Loop Loop;
     // Construction of supports.
     gp_Pln S (0.,0.,1.,- Altitud(V[i]));
-    TopoDS_Face F = BRepLib_MakeFace(S);
+    TopoDS_Face F = (TopoDS_Face) BRepLib_MakeFace(S);
     Loop.Init(F);
 
     TopExp_Explorer     ExpSpine(mySpine,TopAbs_EDGE);
@@ -2564,7 +2564,7 @@ static void AddDegeneratedEdge(TopoDS_Fa
 	  Handle(Geom2d_Line) C2d = new Geom2d_Line(PrevP,gp_Dir2d(V));
 	  Standard_Real f = 0, l = PrevP.Distance(P1);
 	  Handle(Geom2d_TrimmedCurve) CT = new Geom2d_TrimmedCurve(C2d,f,l);
-	  TopoDS_Edge NE = BRepLib_MakeEdge(C2d,S);
+	  TopoDS_Edge NE = (TopoDS_Edge) BRepLib_MakeEdge(C2d,S);
 	  B.Degenerated(NE,Standard_True);
 	  B.Add(NE,V1.Oriented(TopAbs_FORWARD));
 	  B.Add(NE,V1.Oriented(TopAbs_REVERSED));
@@ -2583,7 +2583,7 @@ static void AddDegeneratedEdge(TopoDS_Fa
 	Handle(Geom2d_Line) C2d = new Geom2d_Line(P2,gp_Dir2d(V));
 	Standard_Real f = 0, l = P2.Distance(PF);
 	Handle(Geom2d_TrimmedCurve) CT = new Geom2d_TrimmedCurve(C2d,f,l);
-	TopoDS_Edge NE = BRepLib_MakeEdge(C2d,S);
+	TopoDS_Edge NE = (TopoDS_Edge) BRepLib_MakeEdge(C2d,S);
 	B.Degenerated(NE,Standard_True);
 	B.Add(NE,VF.Oriented(TopAbs_FORWARD));
 	B.Add(NE,VF.Oriented(TopAbs_REVERSED));
@@ -2920,8 +2920,8 @@ static TopAbs_Orientation Relative (cons
   }
   Commun = Standard_True;
 
-  TopoDS_Wire WW1 = BRepLib_MakeWire(E1);
-  TopoDS_Wire WW2 = BRepLib_MakeWire(E2);
+  TopoDS_Wire WW1 = (TopoDS_Wire) BRepLib_MakeWire(E1);
+  TopoDS_Wire WW2 = (TopoDS_Wire) BRepLib_MakeWire(E2);
   Standard_Real Tol = BRepFill_Confusion();
   if (Side(WW1,Tol) < 4 && Side(WW2,Tol) < 4) // two to the left
     return TopAbs_FORWARD;
@@ -3170,7 +3170,7 @@ void CutEdgeProf (const TopoDS_Edge&
 	
 	VV = BRepLib_MakeVertex( C->Value(Param));
 	
-	TopoDS_Edge EE = BRepLib_MakeEdge(C,Vf,VV);
+	TopoDS_Edge EE = (TopoDS_Edge) BRepLib_MakeEdge(C,Vf,VV);
 	EE.Orientation(E.Orientation());
 	if ( EE.Orientation() == TopAbs_FORWARD)
 	  Cuts.Append(EE);
@@ -3184,7 +3184,7 @@ void CutEdgeProf (const TopoDS_Edge&
     }
   }
 
-  TopoDS_Edge EE = BRepLib_MakeEdge(C,Vf,Vl);
+  TopoDS_Edge EE = (TopoDS_Edge) BRepLib_MakeEdge(C,Vf,Vl);
   EE.Orientation(E.Orientation());
   if ( EE.Orientation() == TopAbs_FORWARD)
     Cuts.Append(EE);
@@ -3227,8 +3227,8 @@ void CutEdge (const TopoDS_Edge& E,
     gp_Pnt2d P1 = CT2d->Value(m1);
     gp_Pnt2d P2 = CT2d->Value(m2);
 
-    TopoDS_Vertex VL1 = BRepLib_MakeVertex(gp_Pnt(P1.X(), P1.Y(), 0.));
-    TopoDS_Vertex VL2 = BRepLib_MakeVertex(gp_Pnt(P2.X(), P2.Y(), 0.));
+    TopoDS_Vertex VL1 = (TopoDS_Vertex) BRepLib_MakeVertex(gp_Pnt(P1.X(), P1.Y(), 0.));
+    TopoDS_Vertex VL2 = (TopoDS_Vertex) BRepLib_MakeVertex(gp_Pnt(P2.X(), P2.Y(), 0.));
     TopoDS_Shape aLocalShape1 = E.EmptyCopied();
     TopoDS_Shape aLocalShape2 = E.EmptyCopied();
     TopoDS_Shape aLocalShape3 = E.EmptyCopied();
Index: oce/src/BRepFill/BRepFill_Filling.cxx
===================================================================
--- oce.orig/src/BRepFill/BRepFill_Filling.cxx
+++ oce/src/BRepFill/BRepFill_Filling.cxx
@@ -611,7 +611,7 @@ void BRepFill_Filling::Build()
 	  Points(1) = gp_Pnt2d( U1, V1 );
 	  Points(2) = gp_Pnt2d( U2, V2 );
 	  Handle( Geom2d_BezierCurve ) Line2d = new Geom2d_BezierCurve( Points );
-	  TopoDS_Edge E = BRepLib_MakeEdge( Line2d, CurSurface, FirstVtx, LastVtx );
+	  TopoDS_Edge E = (TopoDS_Edge) BRepLib_MakeEdge( Line2d, CurSurface, FirstVtx, LastVtx );
 	  Add( E, CurFace, myFreeConstraints(j).myOrder );
 	  VerSeq.Remove( i, i+1 );
 	  break;
Index: oce/src/BRepFill/BRepFill_NSections.cxx
===================================================================
--- oce.orig/src/BRepFill/BRepFill_NSections.cxx
+++ oce/src/BRepFill/BRepFill_NSections.cxx
@@ -819,7 +819,7 @@ void BRepFill_NSections::Init(const TCol
       = Handle(Geom_BSplineCurve)::DownCast(myLaws->Value(ii)->BSplineSurface()->VIso(V));
     Standard_Real first = Curve ->FirstParameter(),
     last = Curve ->LastParameter();
-    TopoDS_Edge E = BRepLib_MakeEdge(Curve,first,last);
+    TopoDS_Edge E = (TopoDS_Edge) BRepLib_MakeEdge(Curve,first,last);
     MW.Add(E);
   }
   TopAbs_Orientation Orien = TopAbs_FORWARD;
Index: oce/src/BRepFill/BRepFill_OffsetWire.cxx
===================================================================
--- oce.orig/src/BRepFill/BRepFill_OffsetWire.cxx
+++ oce/src/BRepFill/BRepFill_OffsetWire.cxx
@@ -538,18 +538,18 @@ void BRepFill_OffsetWire::Perform (const
           for(np = 2; np < NPnts; np++) {
             gp_Pnt LP = Points(np);
             LV = BRepLib_MakeVertex(LP);
-            newE = BRepLib_MakeEdge(FV, LV);
+            newE = (TopoDS_Edge) BRepLib_MakeEdge(FV, LV);
             aL.Append(newE);
             FV = LV;
           }
           LV = Vl;
-          newE = BRepLib_MakeEdge(FV, LV);
+          newE = (TopoDS_Edge) BRepLib_MakeEdge(FV, LV);
           aL.Append(newE);
         }
         else
         {
           //cout << " 2 points " << endl;
-          TopoDS_Edge newE = BRepLib_MakeEdge(Vf, Vl);
+          TopoDS_Edge newE = (TopoDS_Edge) BRepLib_MakeEdge(Vf, Vl);
           aL.Append(newE);
         }
         //Update myMapSpine
@@ -1500,7 +1500,7 @@ void BRepFill_OffsetWire::FixHoles()
         if (IsFirstF) theEdge.Reverse();
         BB.Add( Base, theEdge );
         // Creating new edge from theVertex to Vf
-        TopoDS_Edge NewEdge = BRepLib_MakeEdge( theVertex, Vf );
+        TopoDS_Edge NewEdge = (TopoDS_Edge) BRepLib_MakeEdge( theVertex, Vf );
         BB.Add( Base, NewEdge );
       }
     }
@@ -1538,7 +1538,7 @@ void BRepFill_OffsetWire::FixHoles()
         if (!IsFirstL) theEdge.Reverse();
         BB.Add( Base, theEdge );
         // Creating new edge from Vl to theVertex
-        TopoDS_Edge NewEdge = BRepLib_MakeEdge( Vl, theVertex );
+        TopoDS_Edge NewEdge = (TopoDS_Edge) BRepLib_MakeEdge( Vl, theVertex );
         BB.Add( Base, NewEdge );
       }
     }
@@ -1567,7 +1567,7 @@ void BRepFill_OffsetWire::FixHoles()
       else if (Dist <= MaxTol)
       {
         // Creating new edge from Vl to Vf
-        TopoDS_Edge NewEdge = BRepLib_MakeEdge( Vf, Vl );
+        TopoDS_Edge NewEdge = (TopoDS_Edge) BRepLib_MakeEdge( Vf, Vl );
         BB.Add( Base, NewEdge );
         Base.Closed( Standard_True );
       }
@@ -1808,7 +1808,7 @@ void MakeCircle (const TopoDS_Edge&
     = new  Geom2d_Circle(Axis, Abs(Offset), Offset < 0.);
 
   // Bind the edges in my Map.
-  TopoDS_Edge OE = BRepLib_MakeEdge(Circ, RefPlane);
+  TopoDS_Edge OE = (TopoDS_Edge) BRepLib_MakeEdge(Circ, RefPlane);
   TopTools_ListOfShape LL;
 
   LL.Append(OE);
@@ -1885,7 +1885,7 @@ void MakeOffset (const TopoDS_Edge&
 
   // Bind the edges in my Map.
   if (!G2dOC.IsNull()) {
-    TopoDS_Edge OE = BRepLib_MakeEdge(G2dOC, RefPlane);
+    TopoDS_Edge OE = (TopoDS_Edge) BRepLib_MakeEdge(G2dOC, RefPlane);
     OE.Orientation(E.Orientation());
     TopTools_ListOfShape LL;
     LL.Append(OE);
Index: oce/src/BRepFill/BRepFill_Sweep.cxx
===================================================================
--- oce.orig/src/BRepFill/BRepFill_Sweep.cxx
+++ oce/src/BRepFill/BRepFill_Sweep.cxx
@@ -487,7 +487,7 @@ static void BuildFace(const Handle(Geom_
 	  TE3->Tolerance( Precision::Confusion() );
 	  TE4->Tolerance( Precision::Confusion() );
 	  
-	  TopoDS_Wire theWire = BRepLib_MakeWire( E1, E2, E3, E4 );
+	  TopoDS_Wire theWire = (TopoDS_Wire) BRepLib_MakeWire( E1, E2, E3, E4 );
 	  Standard_Integer NbPoints = NumberOfPoles( theWire );
 	  if (NbPoints <= 100) //limitation for CPU
 	    {
Index: oce/src/BRepFill/BRepFill_TrimShellCorner.cxx
===================================================================
--- oce.orig/src/BRepFill/BRepFill_TrimShellCorner.cxx
+++ oce/src/BRepFill/BRepFill_TrimShellCorner.cxx
@@ -2039,7 +2039,7 @@ static Standard_Boolean ChooseSection(co
       if (!explo.More())
         break;
       TopoDS_Edge FirstEdge = TopoDS::Edge( explo.Current() );
-      TopoDS_Wire NewWire = BRepLib_MakeWire( FirstEdge );
+      TopoDS_Wire NewWire = (TopoDS_Wire) BRepLib_MakeWire( FirstEdge );
       B.Remove( OldComp, FirstEdge );
       if (NewWire.Closed())
         {
@@ -2087,7 +2087,7 @@ static Standard_Boolean ChooseSection(co
               Standard_Real MinDeviation = RealLast();
               for (j = 1; j <= Edges.Length(); j++)
                 {
-                  TopoDS_Wire aWire = BRepLib_MakeWire( NewWire, TopoDS::Edge(Edges(j)) );
+                  TopoDS_Wire aWire = (TopoDS_Wire) BRepLib_MakeWire( NewWire, TopoDS::Edge(Edges(j)) );
                   gp_Pln aPlane;
                   Standard_Boolean issing;
                   Standard_Real Deviation = ComputeAveragePlaneAndMaxDeviation( aWire, aPlane, issing );
Index: oce/src/BRepMAT2d/BRepMAT2d_Explorer.cxx
===================================================================
--- oce.orig/src/BRepMAT2d/BRepMAT2d_Explorer.cxx
+++ oce/src/BRepMAT2d/BRepMAT2d_Explorer.cxx
@@ -81,7 +81,7 @@ void BRepMAT2d_Explorer::Perform(const T
   TopExp_Explorer Exp (F,TopAbs_WIRE);
 //  Modified by Sergey KHROMOV - Tue Nov 26 16:10:37 2002 Begin
   Handle(Geom_Surface) aSurf = BRep_Tool::Surface(F);
-  TopoDS_Face          aNewF = BRepBuilderAPI_MakeFace(aSurf, Precision::Confusion());
+  TopoDS_Face          aNewF = (TopoDS_Face) BRepBuilderAPI_MakeFace(aSurf, Precision::Confusion());
 
   while (Exp.More()) {
     Add (TopoDS::Wire (Exp.Current()),F, aNewF);
Index: oce/src/BRepOffset/BRepOffset_Inter2d.cxx
===================================================================
--- oce.orig/src/BRepOffset/BRepOffset_Inter2d.cxx
+++ oce/src/BRepOffset/BRepOffset_Inter2d.cxx
@@ -361,7 +361,7 @@ static void EdgeInter(const TopoDS_Face&
 	    }
 	  
 	  gp_Pnt P = ResPoints(i); //ponc1.Value();
-	  TopoDS_Vertex aNewVertex = BRepLib_MakeVertex(P);
+	  TopoDS_Vertex aNewVertex = (TopoDS_Vertex) BRepLib_MakeVertex(P);
           aNewVertex.Orientation(TopAbs_INTERNAL);
 	  B.UpdateVertex( aNewVertex, aT1, E1, Tol );
 	  B.UpdateVertex( aNewVertex, aT2, E2, Tol );
@@ -444,7 +444,7 @@ static void EdgeInter(const TopoDS_Face&
       gp_Pnt P2 = BRep_Tool::Pnt(V2[k]);
       Standard_Real Dist = P1.Distance(P2); 
       if (Dist < TolConf) {
-	TopoDS_Vertex V = BRepLib_MakeVertex(P1);
+	TopoDS_Vertex V = (TopoDS_Vertex) BRepLib_MakeVertex(P1);
 	U1 = (j == 0) ? f[1] : l[1];
 	U2 = (k == 0) ? f[2] : l[2];
 	TopoDS_Shape aLocalShape = V.Oriented(TopAbs_INTERNAL);
@@ -629,7 +629,7 @@ static void RefEdgeInter(const TopoDS_Fa
 	}
       
       gp_Pnt P = ResPoints(i); //ponc1.Value();
-      TopoDS_Vertex aNewVertex = BRepLib_MakeVertex(P);
+      TopoDS_Vertex aNewVertex = (TopoDS_Vertex) BRepLib_MakeVertex(P);
       aNewVertex.Orientation(TopAbs_INTERNAL);
       B.UpdateVertex( aNewVertex, aT1, E1, Tol );
       B.UpdateVertex( aNewVertex, aT2, E2, Tol );
@@ -711,7 +711,7 @@ static void RefEdgeInter(const TopoDS_Fa
       gp_Pnt P2 = BRep_Tool::Pnt(V2[k]);
       Standard_Real Dist = P1.Distance(P2); 
       if (Dist < TolConf) {
-	TopoDS_Vertex V = BRepLib_MakeVertex(P1);
+	TopoDS_Vertex V = (TopoDS_Vertex) BRepLib_MakeVertex(P1);
 	U1 = (j == 0) ? f[1] : l[1];
 	U2 = (k == 0) ? f[2] : l[2];
 	TopoDS_Shape aLocalShape = V.Oriented(TopAbs_INTERNAL);
Index: oce/src/BRepOffset/BRepOffset_Inter3d.cxx
===================================================================
--- oce.orig/src/BRepOffset/BRepOffset_Inter3d.cxx
+++ oce/src/BRepOffset/BRepOffset_Inter3d.cxx
@@ -85,8 +85,8 @@ static void ExtentEdge(const TopoDS_Face
   BRep_Builder B;
   B.Range(NE,f,l);
   BRepAdaptor_Curve CE(E);
-  TopoDS_Vertex V1 = BRepLib_MakeVertex(CE.Value(f));
-  TopoDS_Vertex V2 = BRepLib_MakeVertex(CE.Value(l));
+  TopoDS_Vertex V1 = (TopoDS_Vertex) BRepLib_MakeVertex(CE.Value(f));
+  TopoDS_Vertex V2 = (TopoDS_Vertex) BRepLib_MakeVertex(CE.Value(l));
   B.Add(NE,V1.Oriented(TopAbs_FORWARD));
   B.Add(NE,V2.Oriented(TopAbs_REVERSED));
   NE.Orientation(E.Orientation());
Index: oce/src/BRepOffset/BRepOffset_MakeOffset.cxx
===================================================================
--- oce.orig/src/BRepOffset/BRepOffset_MakeOffset.cxx
+++ oce/src/BRepOffset/BRepOffset_MakeOffset.cxx
@@ -2115,7 +2115,7 @@ void BRepOffset_MakeOffset::CorrectConic
       {
 	Vfirst = -M_PI/2.; Vlast = p2d1.Y();
       }
-    TopoDS_Face NewSphericalFace = BRepLib_MakeFace(aSphSurf, Ufirst, Ulast, Vfirst, Vlast, Precision::Confusion());
+    TopoDS_Face NewSphericalFace = (TopoDS_Face) BRepLib_MakeFace(aSphSurf, Ufirst, Ulast, Vfirst, Vlast, Precision::Confusion());
     TopoDS_Edge OldEdge;
     for (Explo.Init(NewSphericalFace, TopAbs_EDGE); Explo.More(); Explo.Next())
       {
@@ -3115,7 +3115,7 @@ void BRepOffset_MakeOffset::MakeMissingW
 	      BB.Add(arcWire, EA2);
 	      BRepLib::BuildCurves3d( arcWire, myTol );
 	      arcWire.Closed(Standard_True);
-	      TopoDS_Face arcFace = BRepLib_MakeFace(arcWire, Standard_True);
+	      TopoDS_Face arcFace = (TopoDS_Face) BRepLib_MakeFace(arcWire, Standard_True);
 	      BRepTools::Update(arcFace);
 	      myWalls.Append(arcFace);
 	      TopoDS_Shape localEA2 = EA2.Oriented(TopAbs_FORWARD);
Index: oce/src/BRepOffset/BRepOffset_Tool.cxx
===================================================================
--- oce.orig/src/BRepOffset/BRepOffset_Tool.cxx
+++ oce/src/BRepOffset/BRepOffset_Tool.cxx
@@ -369,7 +369,7 @@ static void BuildPCurves (const TopoDS_E
     {
       gp_Pnt fpoint = AC.Value( AC.FirstParameter() );
       gp_Pnt lpoint = AC.Value( AC.LastParameter() );
-      TopoDS_Face theFace = BRepLib_MakeFace( theSurf, Precision::Confusion() );
+      TopoDS_Face theFace = (TopoDS_Face) BRepLib_MakeFace( theSurf, Precision::Confusion() );
       Standard_Real U1 = 0., U2 = 0., TolProj = 1.e-4; //1.e-5;
       TopoDS_Edge theEdge;
       TopExp_Explorer Explo;
@@ -749,7 +749,7 @@ void BRepOffset_Tool::PipeInter(const To
     for (Standard_Integer i = 1; i <= Inter.NbLines(); i++) {
       CI = Inter.Line(i);
       if (ToSmall(CI)) continue;
-      TopoDS_Edge E = BRepLib_MakeEdge(CI);
+      TopoDS_Edge E = (TopoDS_Edge) BRepLib_MakeEdge(CI);
       if (Inter.HasLineOnS1(i)) {
 	Handle(Geom2d_Curve) C2 = Inter.LineOnS1(i);
 	PutInBounds  (F1,E,C2);
@@ -1741,7 +1741,7 @@ void BRepOffset_Tool::Inter3D(const Topo
 	while (!edges.IsEmpty())
 	  {
 	    TopoDS_Edge anEdge = TopoDS::Edge( edges.First() );
-	    TopoDS_Wire aWire = BRepLib_MakeWire( anEdge ), resWire;
+	    TopoDS_Wire aWire = (TopoDS_Wire) BRepLib_MakeWire( anEdge ), resWire;
 	    TColStd_SequenceOfInteger Candidates;
 	    for (k = 1; k <= wseq.Length(); k++)
 	      {
@@ -1783,7 +1783,7 @@ void BRepOffset_Tool::Inter3D(const Topo
 			  }
 		      }
 		  }
-		TopoDS_Wire NewWire = BRepLib_MakeWire( resWire, TopoDS::Edge(edges(Candidates(minind))) );
+		TopoDS_Wire NewWire = (TopoDS_Wire) BRepLib_MakeWire( resWire, TopoDS::Edge(edges(Candidates(minind))) );
 		wseq(k) = NewWire;
 		edges.Remove(Candidates(minind));
 	      }
@@ -2043,7 +2043,7 @@ void BRepOffset_Tool::InterOrExtent(cons
       CI = Inter.Line(i);
       
       if (ToSmall(CI)) continue;
-      TopoDS_Edge E = BRepLib_MakeEdge(CI);
+      TopoDS_Edge E = (TopoDS_Edge) BRepLib_MakeEdge(CI);
       BuildPCurves (E,F1);
       BuildPCurves (E,F2);
       OrientSection (E,F1,F2,O1,O2);
@@ -2444,7 +2444,7 @@ void BRepOffset_Tool::Inter2d (const Top
 	}
 	if (YaSol) {
 	  gp_Pnt        P   = S->Value(P2d.X(),P2d.Y());
-	  TopoDS_Vertex V = BRepLib_MakeVertex(P);
+	  TopoDS_Vertex V = (TopoDS_Vertex) BRepLib_MakeVertex(P);
 	  V.Orientation(TopAbs_INTERNAL);
 	  TopoDS_Shape aLocalEdge = E1.Oriented(TopAbs_FORWARD);
 	  B.UpdateVertex(V,U1,TopoDS::Edge(aLocalEdge),TolConf);
Index: oce/src/BRepPrimAPI/BRepPrimAPI_MakeHalfSpace.cxx
===================================================================
--- oce.orig/src/BRepPrimAPI/BRepPrimAPI_MakeHalfSpace.cxx
+++ oce/src/BRepPrimAPI/BRepPrimAPI_MakeHalfSpace.cxx
@@ -47,7 +47,7 @@ static Standard_Real FindExtrema(const g
 {
   Standard_Integer intvalue=0;
   Dist = RealLast();
-  TopoDS_Vertex RefVertex = BRepBuilderAPI_MakeVertex(aPnt);
+  TopoDS_Vertex RefVertex = (TopoDS_Vertex) BRepBuilderAPI_MakeVertex(aPnt);
   
   BRepExtrema_ExtPF ext(RefVertex,aFace);
   
Index: oce/src/BRepTest/BRepTest_CurveCommands.cxx
===================================================================
--- oce.orig/src/BRepTest/BRepTest_CurveCommands.cxx
+++ oce/src/BRepTest/BRepTest_CurveCommands.cxx
@@ -441,7 +441,7 @@ static Standard_Integer edge(Draw_Interp
   TopoDS_Shape V1 = DBRep::Get(a[2],TopAbs_VERTEX);
   TopoDS_Shape V2 = DBRep::Get(a[3],TopAbs_VERTEX);
   if (V1.IsNull() || V2.IsNull()) return 1;
-  TopoDS_Edge E = BRepBuilderAPI_MakeEdge(TopoDS::Vertex(V1),
+  TopoDS_Edge E = (TopoDS_Edge) BRepBuilderAPI_MakeEdge(TopoDS::Vertex(V1),
     TopoDS::Vertex(V2));
   DBRep::Set(a[1],E);
   return 0;
@@ -486,7 +486,7 @@ static Standard_Integer isoedge(Draw_Int
     L = new Geom2d_Line(gp_Pnt2d(0,p),gp_Dir2d(1,0));
   }
 
-  TopoDS_Edge E = BRepBuilderAPI_MakeEdge(C,p1,p2);
+  TopoDS_Edge E = (TopoDS_Edge) BRepBuilderAPI_MakeEdge(C,p1,p2);
   E.Location(Loc);
   BRep_Builder B;
   B.UpdateEdge(E,L,TopoDS::Face(Sh),0.);
@@ -1614,7 +1614,7 @@ Standard_Integer edgeintersector(Draw_In
   for (;EInter.MorePoint();EInter.NextPoint()) {
     const TopOpeBRep_Point2d& P2D = EInter.Point();
     gp_Pnt           P    = P2D.Value();
-    TopoDS_Vertex    V    = BRepLib_MakeVertex(P);
+    TopoDS_Vertex    V    = (TopoDS_Vertex) BRepLib_MakeVertex(P);
     NbV ++;
     Sprintf(name,"%s_%d",a[1],NbV);
     DBRep::Set(name,V);
Index: oce/src/BRepTest/BRepTest_ExtremaCommands.cxx
===================================================================
--- oce.orig/src/BRepTest/BRepTest_ExtremaCommands.cxx
+++ oce/src/BRepTest/BRepTest_ExtremaCommands.cxx
@@ -54,7 +54,7 @@ static Standard_Integer distance (Draw_I
   if (!BRepExtrema_Poly::Distance(S1,S2,P1,P2,D)) return 1;
   //cout << " distance : " << D << endl;
   di << " distance : " << D << "\n";
-  TopoDS_Edge E = BRepLib_MakeEdge(P1,P2);
+  TopoDS_Edge E = (TopoDS_Edge) BRepLib_MakeEdge(P1,P2);
   DBRep::Set("distance",E);
   return 0;
 }
@@ -92,7 +92,7 @@ static Standard_Integer distmini(Draw_In
 	     P2 = (dst.PointOnShape2(i1));
              if (dst.Value()<=1.e-9) 
              {
-              TopoDS_Vertex V =BRepLib_MakeVertex(P1);
+              TopoDS_Vertex V = (TopoDS_Vertex) BRepLib_MakeVertex(P1);
               char namev[100];
               if (i1==1) 
 	      Sprintf(namev, "%s" ,ns0);
@@ -103,7 +103,7 @@ static Standard_Integer distmini(Draw_In
               }
              else
 	     {char name[100];
-              TopoDS_Edge E = BRepLib_MakeEdge (P1, P2);
+              TopoDS_Edge E = (TopoDS_Edge) BRepLib_MakeEdge (P1, P2);
 	      if (i1==1)
               {Sprintf(name,"%s",ns0);}
               else {Sprintf(name,"%s%d",ns0,i1);}
Index: oce/src/BRepTest/BRepTest_SurfaceCommands.cxx
===================================================================
--- oce.orig/src/BRepTest/BRepTest_SurfaceCommands.cxx
+++ oce/src/BRepTest/BRepTest_SurfaceCommands.cxx
@@ -196,7 +196,7 @@ static Standard_Integer mkplane(Draw_Int
     OnlyPlane =  !strcmp(a[3],"1");
   }
 
-  TopoDS_Face F = BRepBuilderAPI_MakeFace(TopoDS::Wire(S), OnlyPlane);
+  TopoDS_Face F = (TopoDS_Face) BRepBuilderAPI_MakeFace(TopoDS::Wire(S), OnlyPlane);
 
   DBRep::Set(a[1],F);
   return 0;
Index: oce/src/ChFi2d/ChFi2d_Builder.cxx
===================================================================
--- oce.orig/src/ChFi2d/ChFi2d_Builder.cxx
+++ oce/src/ChFi2d/ChFi2d_Builder.cxx
@@ -612,7 +612,7 @@ TopoDS_Edge ChFi2d_Builder::BuildNewEdge
     makeEdge.Init(curve, NewExtr, lastVertex);  
   else 
     makeEdge.Init(curve, firstVertex, NewExtr);
-  TopoDS_Edge anEdge = makeEdge;
+  TopoDS_Edge anEdge = (TopoDS_Edge) makeEdge;
   anEdge.Orientation(E1.Orientation());
 //  anEdge.Location(E1.Location());
   return anEdge;
Index: oce/src/ChFi3d/ChFi3d_Builder_2.cxx
===================================================================
--- oce.orig/src/ChFi3d/ChFi3d_Builder_2.cxx
+++ oce/src/ChFi3d/ChFi3d_Builder_2.cxx
@@ -990,7 +990,7 @@ static void  ChFi3d_BuildPlane (TopOpeBR
     if  (theProp.IsNormalDefined()) {
       P =  theProp.Value();
       Handle(Geom_Plane) Pln  = new Geom_Plane(P, theProp.Normal());
-      TopoDS_Face        NewF = BRepLib_MakeFace(Pln, Precision::Confusion());
+      TopoDS_Face        NewF = (TopoDS_Face) BRepLib_MakeFace(Pln, Precision::Confusion());
       NewF.Orientation(F.Orientation());
       pons.SetCoord(0.,0.);
       HS->ChangeSurface().Initialize(NewF);
Index: oce/src/LocOpe/LocOpe_DPrism.cxx
===================================================================
--- oce.orig/src/LocOpe/LocOpe_DPrism.cxx
+++ oce/src/LocOpe/LocOpe_DPrism.cxx
@@ -85,12 +85,12 @@ LocOpe_DPrism::LocOpe_DPrism(const TopoD
   Standard_Real y =  Height1*sin(Angle);
   Standard_Real z =  Height1*cos(Angle);
 
-  TopoDS_Vertex Vert2  = BRepLib_MakeVertex(gp_Pnt(0,y,z));
+  TopoDS_Vertex Vert2  = (TopoDS_Vertex) BRepLib_MakeVertex(gp_Pnt(0,y,z));
 
   Standard_Real y1 =  -Height2*sin(Angle);
   Standard_Real z1 =  -Height2*cos(Angle);
 
-  TopoDS_Vertex Vert1  = BRepLib_MakeVertex(gp_Pnt(0,y1,z1));  
+  TopoDS_Vertex Vert1  = (TopoDS_Vertex) BRepLib_MakeVertex(gp_Pnt(0,y1,z1));
 
   myProfile2 = BRepLib_MakeEdge(Vert1, Vert2);
   
@@ -104,7 +104,7 @@ LocOpe_DPrism::LocOpe_DPrism(const TopoD
   Standard_Real Deltay = Max(Umax-Umin,Vmax-Vmin) + Abs(y);
   Deltay*=2;
   
-  TopoDS_Vertex Vert3  = BRepLib_MakeVertex(gp_Pnt(0, y + Deltay, z));
+  TopoDS_Vertex Vert3  = (TopoDS_Vertex) BRepLib_MakeVertex(gp_Pnt(0, y + Deltay, z));
   myProfile3 = BRepLib_MakeEdge(Vert2, Vert3);
 
   Umax = 0.;
@@ -116,7 +116,7 @@ LocOpe_DPrism::LocOpe_DPrism(const TopoD
   Standard_Real Deltay1 = Max(Umax-Umin,Vmax-Vmin) + Abs(y1);
   Deltay1*=2;
 
-  TopoDS_Vertex Vert4  = BRepLib_MakeVertex(gp_Pnt(0, y1+Deltay1, z1));
+  TopoDS_Vertex Vert4  = (TopoDS_Vertex) BRepLib_MakeVertex(gp_Pnt(0, y1+Deltay1, z1));
   myProfile1 = BRepLib_MakeEdge(Vert4, Vert1);
 
   myProfile  = BRepLib_MakeWire(myProfile1,myProfile2,myProfile3);
@@ -358,8 +358,8 @@ LocOpe_DPrism::LocOpe_DPrism(const TopoD
   Standard_Real y =  Height*sin(Angle);
   Standard_Real z =  Height*cos(Angle);
 
-  TopoDS_Vertex Vert1  = BRepLib_MakeVertex(gp_Pnt(0, 0, 0));
-  TopoDS_Vertex Vert2  = BRepLib_MakeVertex(gp_Pnt(0,y,z));
+  TopoDS_Vertex Vert1  = (TopoDS_Vertex) BRepLib_MakeVertex(gp_Pnt(0, 0, 0));
+  TopoDS_Vertex Vert2  = (TopoDS_Vertex) BRepLib_MakeVertex(gp_Pnt(0,y,z));
   myProfile2 = BRepLib_MakeEdge(Vert1, Vert2);
   
   Standard_Real Umin,Umax,Vmin,Vmax;
@@ -367,10 +367,10 @@ LocOpe_DPrism::LocOpe_DPrism(const TopoD
   Standard_Real Deltay = Max(Umax-Umin,Vmax-Vmin) + Abs(y);
   Deltay*=2;
   
-  TopoDS_Vertex Vert3  = BRepLib_MakeVertex(gp_Pnt(0, y + Deltay,z));
+  TopoDS_Vertex Vert3  = (TopoDS_Vertex) BRepLib_MakeVertex(gp_Pnt(0, y + Deltay,z));
   myProfile3 = BRepLib_MakeEdge(Vert2, Vert3);
   
-  TopoDS_Vertex Vert4  = BRepLib_MakeVertex(gp_Pnt(0, Deltay,0));
+  TopoDS_Vertex Vert4  = (TopoDS_Vertex) BRepLib_MakeVertex(gp_Pnt(0, Deltay,0));
   myProfile1 = BRepLib_MakeEdge(Vert4, Vert1);
   
   myProfile = BRepLib_MakeWire(myProfile1,myProfile2,myProfile3);
Index: oce/src/ShapeFix/ShapeFix_ComposeShell.cxx
===================================================================
--- oce.orig/src/ShapeFix/ShapeFix_ComposeShell.cxx
+++ oce/src/ShapeFix/ShapeFix_ComposeShell.cxx
@@ -18,6 +18,11 @@
 //    abv  22.07.99 implementing patch indices
 //    svv  10.01.00 porting on DEC
 
+/* Starting from bcc32 v6.40 this flag should be passed as a compiler option. */
+#if defined(__BORLANDC__) && __BORLANDC__ < 0x0640 /* bcc32 v6.40 */
+#pragma option -x-
+#endif
+
 #include <ShapeFix_ComposeShell.ixx>
 
 #include <Precision.hxx>
Index: oce/src/ShapeFix/ShapeFix_Wire.cxx
===================================================================
--- oce.orig/src/ShapeFix/ShapeFix_Wire.cxx
+++ oce/src/ShapeFix/ShapeFix_Wire.cxx
@@ -1671,7 +1671,7 @@ static Standard_Boolean TryNewPCurve (co
 
   if ( ! mkedge.IsDone() ) return Standard_False;
 
-  TopoDS_Edge edge = mkedge;
+  TopoDS_Edge edge = (TopoDS_Edge) mkedge;
   BRep_Builder B;
   B.UpdateEdge ( edge, c2d, face, 0. );
   B.Range ( edge, face, first, last );
Index: oce/src/Standard/Standard_ErrorHandler.cxx
===================================================================
--- oce.orig/src/Standard/Standard_ErrorHandler.cxx
+++ oce/src/Standard/Standard_ErrorHandler.cxx
@@ -37,14 +37,7 @@
 // request will be ignored. If the abort request do a raise during a setjmp
 // or a longjmp, there will be a "terminating SEGV" impossible to handle.
 
-//==== The top of the Errors Stack ===========================================
-static Standard_ErrorHandler* Top = 0;
-
-// A mutex to protect from concurrent access to Top
-// Note that we should NOT use Sentry while in this class, as Sentry
-// would register mutex as callback in the current exception handler
-static Standard_Mutex theMutex; 
-
+//Somehow borland needs this inline global function to be declared first ... ??
 static inline Standard_ThreadId GetThreadID()
 {
 #ifndef WNT
@@ -54,6 +47,14 @@ static inline Standard_ThreadId GetThrea
 #endif
 }
 
+//==== The top of the Errors Stack ===========================================
+static Standard_ErrorHandler* Top = 0;
+
+// A mutex to protect from concurrent access to Top
+// Note that we should NOT use Sentry while in this class, as Sentry
+// would register mutex as callback in the current exception handler
+static Standard_Mutex theMutex; 
+
 //============================================================================
 //====  Constructor : Create a ErrorHandler structure. And add it at the 
 //====                'Top' of "ErrorHandler's stack".
Index: oce/src/VrmlData/VrmlData_Geometry.cxx
===================================================================
--- oce.orig/src/VrmlData/VrmlData_Geometry.cxx
+++ oce/src/VrmlData/VrmlData_Geometry.cxx
@@ -94,7 +94,7 @@ const Handle(TopoDS_TShape)& VrmlData_Bo
   if (myIsModified) {
     try {
       const TopoDS_Shell aShell =
-        BRepPrimAPI_MakeBox (gp_Pnt (-0.5 * mySize),
+        (TopoDS_Shell) BRepPrimAPI_MakeBox (gp_Pnt (-0.5 * mySize),
                              mySize.X(), mySize.Y(), mySize.Z());
       SetTShape (aShell.TShape());
       myIsModified = Standard_False;
