From ebddf3abed1a0b0b0f550c8e04bbbca2a42d081a Mon Sep 17 00:00:00 2001
From: Jerome Robert <jeromerobert@users.sf.net>
Date: Thu, 12 Jan 2012 18:22:30 +0100
Subject: [PATCH] Geom_BSplineCurve.cxx: Add explicit exception message

---
 src/Geom/Geom_BSplineCurve.cxx |   12 +++++++-----
 1 files changed, 7 insertions(+), 5 deletions(-)

diff --git a/src/Geom/Geom_BSplineCurve.cxx b/src/Geom/Geom_BSplineCurve.cxx
index 1f4e7a7..28f36dd 100644
--- a/src/Geom/Geom_BSplineCurve.cxx
+++ b/src/Geom/Geom_BSplineCurve.cxx
@@ -45,20 +45,22 @@ static void CheckCurveData
  const Standard_Boolean            Periodic)
 {
   if (Degree < 1 || Degree > Geom_BSplineCurve::MaxDegree()) {
-    Standard_ConstructionError::Raise();  
+    Standard_ConstructionError::Raise("BSpline degree smaller than 1 or greeter than max value.");
   }
   
-  if (CPoles.Length() < 2)                Standard_ConstructionError::Raise();
-  if (CKnots.Length() != CMults.Length()) Standard_ConstructionError::Raise();
+  if (CPoles.Length() < 2)
+    Standard_ConstructionError::Raise("BSpline with less than 2 poles");
+  if (CKnots.Length() != CMults.Length())
+    Standard_ConstructionError::Raise("BSpline with number of knots different of number of knot multiplicity");
   
   for (Standard_Integer I = CKnots.Lower(); I < CKnots.Upper(); I++) {
     if (CKnots (I+1) - CKnots (I) <= Epsilon (Abs(CKnots (I)))) {
-      Standard_ConstructionError::Raise();
+      Standard_ConstructionError::Raise("Too small distance between knots in a BSpline curve");
     }
   }
   
   if (CPoles.Length() != BSplCLib::NbPoles(Degree,Periodic,CMults))
-    Standard_ConstructionError::Raise();
+    Standard_ConstructionError::Raise("Wrong number of poles in a BSpline curve: "+CPoles.Length());
 }
 
 //=======================================================================
-- 
1.7.9.1

