From 88a1672fb803f735929414c03bee9767deeff9f7 Mon Sep 17 00:00:00 2001
From: Denis Barbier <bouzim@gmail.com>
Date: Wed, 10 Aug 2011 02:13:21 +0200
Subject: [PATCH 1/3] Let TKService depend on X11 only when visualization
 component is compiled

This allows building OCAF and Data Exchange on computers without X11.

Closes issue #36.
---
 adm/cmake/TKService/CMakeLists.txt             |    2 +-
 inc/Aspect_XWD.hxx                             |    1 +
 src/AlienImage/AlienImage_X11XWDAlienData.cxx  |    4 +---
 src/AlienImage/AlienImage_X11XWDFileHeader.cxx |    4 +---
 4 files changed, 4 insertions(+), 7 deletions(-)

diff --git a/inc/Aspect_XWD.hxx b/inc/Aspect_XWD.hxx
index 1a00364..c80e5c8 100644
--- a/inc/Aspect_XWD.hxx
+++ b/inc/Aspect_XWD.hxx
@@ -3,6 +3,7 @@
 
 # ifndef WNT
 #  include <X11/XWDFile.h>
+#  include <X11/X.h>
 # else
 
 # ifdef WORD64
diff --git a/src/AlienImage/AlienImage_X11XWDAlienData.cxx b/src/AlienImage/AlienImage_X11XWDAlienData.cxx
index dea0f86..8672265 100644
--- a/src/AlienImage/AlienImage_X11XWDAlienData.cxx
+++ b/src/AlienImage/AlienImage_X11XWDAlienData.cxx
@@ -11,9 +11,7 @@
 #define TEST	//GG_140699
 //		Check file extension, must be ".xwd".
 
-#ifndef WNT
-# include <X11/Xlib.h>
-#endif  // WNT
+#include <Aspect_XWD.hxx>
 #include <Aspect_GenericColorMap.hxx>
 #include <Image_PseudoColorImage.hxx>
 #include <AlienImage_MemoryOperations.hxx>
diff --git a/src/AlienImage/AlienImage_X11XWDFileHeader.cxx b/src/AlienImage/AlienImage_X11XWDFileHeader.cxx
index ba12864..3a8ea76 100644
--- a/src/AlienImage/AlienImage_X11XWDFileHeader.cxx
+++ b/src/AlienImage/AlienImage_X11XWDFileHeader.cxx
@@ -1,6 +1,4 @@
-#ifndef WNT
-# include <X11/Xlib.h>
-#endif  // WNT
+#include <Aspect_XWD.hxx>
 #include <AlienImage_X11XWDFileHeader.hxx>
 
 const Handle(Standard_Type)& STANDARD_TYPE(AlienImage_X11XWDFileHeader)
-- 
1.7.6.3

